<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
 <HEAD>
  <TITLE> New Document </TITLE>
  <style>
    /* 1. HI·ªÜU ·ª®NG SLIDESHOW ·∫¢NH */
    html, body {
        height: 100%;
        padding: 0;
        margin: 0;
        background-color: #000;
        animation: background-slideshow 24s infinite;
        background-size: cover;
        background-position: center;
    }
    @keyframes background-slideshow {
        0% { background-image: url('https://raw.githubusercontent.com/khuongnhii/my-hosted-images/main/IMG_4532.jpeg'); } 
        25% { background-image: url('https://raw.githubusercontent.com/khuongnhii/my-hosted-images/main/IMG_4532.jpeg'); }
        30% { background-image: url('https://raw.githubusercontent.com/khuongnhii/my-hosted-images/main/att.9XQ-uD4t5vTSFlZPuiEHzCguDWB4x-2EuUOJ16GHzts.jpeg'); } 
        55% { background-image: url('https://raw.githubusercontent.com/khuongnhii/my-hosted-images/main/att.9XQ-uD4t5vTSFlZPuiEHzCguDWB4x-2EuUOJ16GHzts.jpeg'); }
        60% { background-image: url('https://raw.githubusercontent.com/khuongnhii/my-hosted-images/main/att.KHBZJo12GVj0lcgokuydl9Wx3in65XOYofD_hw2J-7U.jpeg'); } 
        95% { background-image: url('https://raw.githubusercontent.com/khuongnhii/my-hosted-images/main/att.KHBZJo12GVj0lcgokuydl9Wx3in65XOYofD_hw2J-7U.jpeg'); }
        100% { background-image: url('https://raw.githubusercontent.com/khuongnhii/my-hosted-images/main/IMG_4532.jpeg'); }
    }   

    /* 2. HI·ªÜU ·ª®NG CH·ªÆ R∆†I */
    #message-container {
        position: absolute;
        top: 0; left: 0;
        width: 100%; height: 100%;
        z-index: 10;
        pointer-events: none;
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        align-items: center;
    }
    .falling-text {
        position: absolute;
        width: 100%;
        text-align: center;
        font-size: 2.5em;
        font-weight: bold;
        color: #fff;
        text-shadow: 0 0 10px rgba(255, 107, 154, 0.8);
        animation: fall 24s linear infinite;
        animation-delay: var(--delay);
        opacity: 0;
    }
    @keyframes fall {
        0% { transform: translateY(-50px); opacity: 0; }
        1% { opacity: 1; } 
        75% { transform: translateY(100vh); opacity: 1; }
        100% { transform: translateY(100vh); opacity: 0; }
    }

    canvas {
        position: absolute;
        width: 100%;
        height: 100%;
        background-color: transparent;
    }
  </style>
 </HEAD>
 <BODY>
  <div id="message-container">
    <div class="falling-text" style="--delay: 0s;">Anh nh·ªõ em r·∫•t nhi·ªÅu! ‚ù§Ô∏è</div>
    <div class="falling-text" style="--delay: 0.5s;">Anh nh·ªõ em r·∫•t nhi·ªÅu! ‚ù§Ô∏è</div>
    <div class="falling-text" style="--delay: 1s;">Anh nh·ªõ em r·∫•t nhi·ªÅu! ‚ù§Ô∏è</div>
    <div class="falling-text" style="--delay: 1.5s;">Anh nh·ªõ em r·∫•t nhi·ªÅu! ‚ù§Ô∏è</div>
    <div class="falling-text" style="--delay: 8s;">Anh nh·ªõ em r·∫•t nhi·ªÅu! ‚ù§Ô∏è</div>
    <div class="falling-text" style="--delay: 8.5s;">Anh nh·ªõ em r·∫•t nhi·ªÅu! ‚ù§Ô∏è</div>
    <div class="falling-text" style="--delay: 9s;">Anh nh·ªõ em r·∫•t nhi·ªÅu! ‚ù§Ô∏è</div>
    <div class="falling-text" style="--delay: 9.5s;">Anh nh·ªõ em r·∫•t nhi·ªÅu! ‚ù§Ô∏è</div>
    <div class="falling-text" style="--delay: 16s;">Anh nh·ªõ em r·∫•t nhi·ªÅu! ‚ù§Ô∏è</div>
    <div class="falling-text" style="--delay: 16.5s;">Anh nh·ªõ em r·∫•t nhi·ªÅu! ‚ù§Ô∏è</div>
    <div class="falling-text" style="--delay: 17s;">Anh nh·ªõ em r·∫•t nhi·ªÅu! ‚ù§Ô∏è</div>
    <div class="falling-text" style="--delay: 17.5s;">Anh nh·ªõ em r·∫•t nhi·ªÅu! ‚ù§Ô∏è</div>

    <div class="falling-text" style="--delay: 3s;">Ch√∫c em m·ªôt ng√†y l·ªÖ 20-10 ƒë·∫ßy √Ω nghƒ©a v√† nhi·ªÅu ni·ªÅm vuii!!</div>
    <div class="falling-text" style="--delay: 11s;">Ch√∫c em m·ªôt ng√†y l·ªÖ 20-10 ƒë·∫ßy √Ω nghƒ©a v√† nhi·ªÅu ni·ªÅm vuii!!</div>
    <div class="falling-text" style="--delay: 19s;">Ch√∫c em m·ªôt ng√†y l·ªÖ 20-10 ƒë·∫ßy √Ω nghƒ©a v√† nhi·ªÅu ni·ªÅm vuii!!</div>

    <div class="falling-text" style="--delay: 5s;">C·∫£m ∆°n v√¨ t·∫•t c·∫£.</div>
    <div class="falling-text" style="--delay: 13s;">C·∫£m ∆°n v√¨ t·∫•t c·∫£.</div>
    <div class="falling-text" style="--delay: 21s;">C·∫£m ∆°n v√¨ t·∫•t c·∫£.</div>
  </div>

  <canvas id="pinkboard"></canvas>

  <!-- üíû N√∫t ph√°t nh·∫°c -->
  <button id="musicButton" 
          style="position: fixed; bottom: 30px; right: 30px; 
                 background: radial-gradient(circle, #ff7aa8, #ff4081);
                 border: none; border-radius: 50%;
                 width: 70px; height: 70px;
                 box-shadow: 0 0 20px rgba(255,100,150,0.7);
                 cursor: pointer;
                 color: white; font-size: 20px;
                 animation: glow 2s ease-in-out infinite alternate;
                 z-index: 999;">
      üíû
  </button>

  <audio id="bgm" 
         src="https://khuongnhii.github.io/thiepyeu/bgm.mp3"
         preload="auto" loop playsinline></audio>

  <style>
  @keyframes glow {
    from { box-shadow: 0 0 10px rgba(255,120,160,0.6); }
    to { box-shadow: 0 0 25px rgba(255,60,120,1); }
  }
  </style>

  <script>
  const btn = document.getElementById('musicButton');
  const bgm = document.getElementById('bgm');
  let playing = false;

  btn.addEventListener('click', async () => {
    try {
      if (!playing) {
        await bgm.play();
        bgm.volume = 0.8;
        playing = true;
        btn.innerText = "üé∂";
        btn.style.boxShadow = "0 0 30px rgba(255,180,220,1)";
      } else {
        bgm.pause();
        playing = false;
        btn.innerText = "üíû";
        btn.style.boxShadow = "0 0 20px rgba(255,100,150,0.7)";
      }
    } catch (err) {
      console.log("Kh√¥ng ph√°t ƒë∆∞·ª£c nh·∫°c:", err);
    }
  });
  </script>

  <!-- To√†n b·ªô ph·∫ßn hi·ªáu ·ª©ng tr√°i tim -->
  <script>
  var settings = {
      particles: {
          length: 500,
          duration: 2,
          velocity: 100,
          effect: -0.75,
          size: 30,
      },
  };

  var Point = (function() {
      function Point(x, y) {
          this.x = (typeof x !== 'undefined') ? x : 0;
          this.y = (typeof y !== 'undefined') ? y : 0;
      }
      Point.prototype.clone = function() { return new Point(this.x, this.y); };
      Point.prototype.length = function(length) {
          if (typeof length == 'undefined')
              return Math.sqrt(this.x * this.x + this.y * this.y);
          this.normalize();
          this.x *= length; this.y *= length; return this;
      };
      Point.prototype.normalize = function() {
          var length = this.length(); this.x /= length; this.y /= length; return this;
      };
      return Point;
  })();

  var Particle = (function() {
      function Particle() { this.position = new Point(); this.velocity = new Point(); this.acceleration = new Point(); this.age = 0; }
      Particle.prototype.initialize = function(x, y, dx, dy) {
          this.position.x = x; this.position.y = y;
          this.velocity.x = dx; this.velocity.y = dy;
          this.acceleration.x = dx * settings.particles.effect;
          this.acceleration.y = dy * settings.particles.effect;
          this.age = 0;
      };
      Particle.prototype.update = function(dt) {
          this.position.x += this.velocity.x * dt;
          this.position.y += this.velocity.y * dt;
          this.velocity.x += this.acceleration.x * dt;
          this.velocity.y += this.acceleration.y * dt;
          this.age += dt;
      };
      Particle.prototype.draw = function(ctx, image) {
          function ease(t) { return (--t) * t * t + 1; }
          var size = image.width * ease(this.age / settings.particles.duration);
          ctx.globalAlpha = 1 - this.age / settings.particles.duration;
          ctx.drawImage(image, this.position.x - size / 2, this.position.y - size / 2, size, size);
      };
      return Particle;
  })();

  var ParticlePool = (function() {
      var particles, firstActive = 0, firstFree = 0, duration = settings.particles.duration;
      function ParticlePool(length) {
          particles = new Array(length);
          for (var i = 0; i < particles.length; i++) particles[i] = new Particle();
      }
      ParticlePool.prototype.add = function(x, y, dx, dy) {
          particles[firstFree].initialize(x, y, dx, dy);
          firstFree++; if (firstFree == particles.length) firstFree = 0;
          if (firstActive == firstFree) { firstActive++; if (firstActive == particles.length) firstActive = 0; }
      };
      ParticlePool.prototype.update = function(dt) {
          if (firstActive < firstFree)
              for (var i = firstActive; i < firstFree; i++) particles[i].update(dt);
          if (firstFree < firstActive) {
              for (var i = firstActive; i < particles.length; i++) particles[i].update(dt);
              for (var i = 0; i < firstFree; i++) particles[i].update(dt);
          }
          while (particles[firstActive].age >= duration && firstActive != firstFree) {
              firstActive++; if (firstActive == particles.length) firstActive = 0;
          }
      };
      ParticlePool.prototype.draw = function(ctx, image) {
          if (firstActive < firstFree)
              for (var i = firstActive; i < firstFree; i++) particles[i].draw(ctx, image);
          if (firstFree < firstActive) {
              for (var i = firstActive; i < particles.length; i++) particles[i].draw(ctx, image);
              for (var i = 0; i < firstFree; i++) particles[i].draw(ctx, image);
          }
      };
      return ParticlePool;
  })();

  (function(canvas) {
      var ctx = canvas.getContext('2d'),
          particles = new ParticlePool(settings.particles.length),
          particleRate = settings.particles.length / settings.particles.duration,
          time;
      function pointOnHeart(t) {
          return new Point(
              160 * Math.pow(Math.sin(t), 3),
              130 * Math.cos(t) - 50 * Math.cos(2*t) - 20 * Math.cos(3*t) - 10 * Math.cos(4*t) + 25
          );
      }
      var image = (function() {
          var canvas = document.createElement('canvas'), ctx = canvas.getContext('2d');
          canvas.width = settings.particles.size; canvas.height = settings.particles.size;
          function to(t) {
              var p = pointOnHeart(t);
              p.x = settings.particles.size/2 + p.x * settings.particles.size/350;
              p.y = settings.particles.size/2 - p.y * settings.particles.size/350;
              return p;
          }
          ctx.beginPath();
          var t = -Math.PI, p = to(t);
          ctx.moveTo(p.x, p.y);
          while (t < Math.PI) { t += 0.01; p = to(t); ctx.lineTo(p.x, p.y); }
          ctx.closePath();
          ctx.fillStyle = '#FF3860';
          ctx.fill();
          var img = new Image();
          img.src = canvas.toDataURL();
          return img;
      })();

      function renderHeart(dt, offsetX, offsetY) {
          var amount = particleRate * dt;
          for (var i = 0; i < amount; i++) {
              var pos = pointOnHeart(Math.PI - 2 * Math.PI * Math.random());
              var dir = pos.clone().length(settings.particles.velocity);
              particles.add(canvas.width/2 + pos.x + offsetX, canvas.height/2 - pos.y + offsetY, dir.x, -dir.y);
          }
      }

      function render() {
          requestAnimationFrame(render);
          var newTime = new Date().getTime()/1000, dt = newTime - (time || newTime);
          time = newTime;
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          var offset = 180;
          renderHeart(dt, 0, -offset);
          renderHeart(dt, -offset, offset/2);
          renderHeart(dt, offset, offset/2);
          particles.update(dt);
          particles.draw(ctx, image);
      }
      function onResize() {
          canvas.width = canvas.clientWidth;
          canvas.height = canvas.clientHeight;
      }
      window.onresize = onResize;
      setTimeout(function(){ onResize(); render(); }, 10);
  })(document.getElementById('pinkboard'));
  </script>
 </BODY>
</HTML>
